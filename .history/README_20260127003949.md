# PP Player Reloaded
## What's PP Player?
PP Player is and open-source local music player with online integrations (YouTube downloads and informations) made with Godot

## Uses/inspiration of other projects (excluding addons):
- Godot Virtual Scrolling (https://github.com/Ryhon0/GodotVirtualScrolling)
- Nollie (https://github.com/Cranzor/nollie)

## Addons:
### Addons used:
- yt-dlp (https://github.com/yt-dlp/yt-dlp) (not directly used as it is not a godot addon)
- godot-yt-dlp (https://github.com/Nolkaloid/godot-yt-dlp)
- GDContextMenu (https://github.com/Schimiongames/GDContextMenu)
- Godot-GlobalInput-Addon (https://github.com/Darnoman/Godot-GlobalInput-Addon)
- godot_tree_table (https://github.com/EinRainerZufall/godot_tree_table)

### Changes to Godot YT-DLP (https://github.com/Nolkaloid/godot-yt-dlp):
- Added a pull from the GitHub (https://github.com/Nolkaloid/godot-yt-dlp/pull/13) that handles abandoning DL/search requests.
- Added possibility of not downloading or only get infos (not parsed)
- Added a stop if there is an error (error != 0) when executing the command

WIP:
- Progress Hook
- Custom logger handler (half done)

The changed addon by itself does not work because I made it dependent of my project. I advise using the original addon: https://github.com/Nolkaloid/godot-yt-dlp

### Changes to Godot Global Input Addon:
- Set the pressed property of the returning object of GetInputEventMouseButton to false (had an issue with mouse inputs)

### Changes to Godot Context Menu:
- Modified the ContextMenu.cs to support subwindows
Added these lines in the function ```show_item``` before setting the position of the menu (for supporting not embedded subwindows):
```
bool embededSubwindows = ProjectSettings.GetSetting("display/window/subwindows/embed_subwindows").AsBool();
if (!embededSubwindows)
{
    int windowId = parent.GetWindow().GetWindowId();
    Vector2I windowPos = DisplayServer.WindowGetPosition(windowId);
    position += windowPos;
}
```
(This is clearly not the most optimized way to do it, but hey it works and surely won't be used that often :D)

### Changes to godot_tree_table:
- Made so that "true" and "false" (bool or string) are displayed as green and red color respectively instead of just text.
- Added (sloppy) support for bool values sorting (thanks to https://github.com/godotengine/godot/issues/49618#issuecomment-3368709438)

(
    https://github.com/godotengine/godot/issues/49618#issuecomment-3368709438 :
    fixed the error ```ERROR: unguarded_linear_insert: bad comparison function; sorting will be broken``` when using custom comparison functions:

)